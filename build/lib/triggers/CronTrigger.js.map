{"version":3,"sources":["lib/triggers/CronTrigger.js"],"names":["_logger","getLogger","_this","CronTrigger","param","trigger","debug","cronJob","cron","JSON","stringify","exception","stop","Components","name","description","create"],"mappings":"AAAA;;;;;;;;;AACA;;AACA;;;;AACA,IAAIA,UAAU,gBAAOC,SAAP,CAAiB,aAAjB,CAAd;;AAEA,IAAIC,QAAQ,IAAZ;;AAEA;;IACaC,W,WAAAA,W;AACT,yBAAYC,KAAZ,EAAmBC,OAAnB,EAA4B;AAAA;;AACxBL,gBAAQM,KAAR,CAAc,iBAAd;AACAJ,gBAAQ,IAAR;AACA,YAAI;AACA,iBAAKK,OAAL,GAAe,kBAAYH,MAAMI,IAAlB,EAAwB,YAAY;AAC/CH,2BAAWA,QAAQH,KAAR,EAAe,IAAf,EAAqBE,KAArB,CAAX;AACH,aAFc,EAEZ,IAFY,EAEN,IAFM,CAAf;AAGAJ,oBAAQM,KAAR,mDAA8DG,KAAKC,SAAL,CAAeN,KAAf,CAA9D;AACH,SALD,CAKE,OAAOO,SAAP,EAAkB;AAChBX,oBAAQM,KAAR,6CAAwDG,KAAKC,SAAL,CAAeC,SAAf,CAAxD;AACAN,uBAAWA,QAAQH,KAAR,EAAeS,SAAf,EAA0BP,KAA1B,CAAX;AACH;AACJ;;;;kCAES;AACN,iBAAKG,OAAL,IAAgB,KAAKA,OAAL,CAAaK,IAAb,EAAhB;AACA,iBAAKL,OAAL,GAAe,IAAf;AACH;;;;;;AACJ;;AAEM,IAAIM,kCAAa,CAAC;AACrBC,UAAM,aADe;AAErBC,iBAAa,+DAFQ;AAGrBC,YAAQ,gBAACZ,KAAD,EAAQC,OAAR,EAAoB;AACxB,eAAO,IAAIF,WAAJ,CAAgBC,KAAhB,EAAuBC,OAAvB,CAAP;AACH;AALoB,CAAD,CAAjB","file":"CronTrigger.js","sourcesContent":["'use strict';\nimport { CronJob } from 'cron'\nimport { logger } from '../infra/logger';\nlet _logger = logger.getLogger('CronTrigger');\n\nlet _this = null;\n\n// { cron: '{cron format string}' }\nexport class CronTrigger {\n    constructor(param, trigger) {\n        _logger.debug('initializing...');\n        _this = this;\n        try {\n            this.cronJob = new CronJob(param.cron, function () {\n                trigger && trigger(_this, null, param);\n            }, null, true);\n            _logger.debug(`new cron trigger initialized with parameter: ${JSON.stringify(param)}`);\n        } catch (exception) {\n            _logger.debug(`Got exception when creating a cron job ${JSON.stringify(exception)}`);\n            trigger && trigger(_this, exception, param);\n        }\n    }\n\n    destroy() {\n        this.cronJob && this.cronJob.stop();\n        this.cronJob = null;\n    }\n};\n\nexport let Components = [{\n    name: \"CronTrigger\",\n    description: \"The trigger that will be triggered with a defined cron string\",\n    create: (param, trigger) => {\n        return new CronTrigger(param, trigger);\n    }\n}]"],"sourceRoot":"d:\\lab\\awscheduler\\src"}